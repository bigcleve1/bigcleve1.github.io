<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>意义不明小程序by LMH</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #050505; user-select: none; }
        canvas { display: block; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    let texts = [];
    let particles = [];
    let shakeTime = 0; // 震动计时
    let bgOverlay = 0; // 背景叠加强度

    const names = ["董佳琦", "翟利杰", "李子奥", "王浩瑞", "杜英达", "燕奕轩", "徐浩伦", "温祖国"];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    class Particle {
        constructor(x, y, hue) {
            this.x = x;
            this.y = y;
            this.hue = hue;
            this.size = Math.random() * 3 + 2;
            const angle = Math.random() * Math.PI * 2;
            const force = Math.random() * 8 + 4;
            this.vx = Math.cos(angle) * force;
            this.vy = Math.sin(angle) * force;
            this.life = 1.0;
            this.decay = Math.random() * 0.02 + 0.015;
            this.gravity = 0.15; // 增加微弱重力感
        }
        update() {
            this.vx *= 0.96; // 阻力
            this.vy *= 0.96;
            this.vy += this.gravity;
            this.x += this.vx;
            this.y += this.vy;
            this.life -= this.decay;
        }
        draw() {
            ctx.fillStyle = `hsla(${this.hue}, 100%, 70%, ${this.life})`;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size * this.life, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    class FlyingText {
        constructor(x, y, name) {
            this.x = x;
            this.y = y;
            this.content = name + "是给";
            this.vx = (Math.random() - 0.5) * 12;
            this.vy = (Math.random() - 0.5) * 12;
            this.hue = Math.random() * 360;
            this.baseSize = Math.random() * 10 + 25;
            this.scale = 2.5; // 初始缩放，产生弹出感
        }

        update() {
            this.x += this.vx;
            this.y += this.vy;
            
            // 缩放平滑回弹
            if (this.scale > 1) this.scale -= 0.15;

            // 边缘碰撞处理
            let hasHit = false;
            const textWidth = ctx.measureText(this.content).width;

            if (this.x <= 0 || this.x >= canvas.width - textWidth) {
                this.vx *= -1;
                this.x = this.x <= 0 ? 1 : canvas.width - textWidth - 1;
                hasHit = true;
            }
            if (this.y <= this.baseSize || this.y >= canvas.height) {
                this.vy *= -1;
                this.y = this.y <= this.baseSize ? this.baseSize + 1 : canvas.height - 1;
                hasHit = true;
            }

            if (hasHit) {
                this.createImpact(5); // 碰撞火花
                shakeTime = 5; // 触发轻微震动
            }
            this.hue = (this.hue + 1) % 360;
        }

        createImpact(count) {
            for (let i = 0; i < count; i++) {
                particles.push(new Particle(this.x + 20, this.y - 10, this.hue));
            }
        }

        draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.scale(this.scale, this.scale); // 弹出动画
            
            const color = `hsl(${this.hue}, 100%, 70%)`;
            ctx.font = `bold ${this.baseSize}px "PingFang SC", "Microsoft YaHei"`;
            ctx.shadowBlur = 15;
            ctx.shadowColor = color;
            ctx.fillStyle = color;
            ctx.fillText(this.content, 0, 0);
            
            ctx.restore();
        }
    }

    window.addEventListener('mousedown', (e) => {
        const name = names[Math.floor(Math.random() * names.length)];
        const newText = new FlyingText(e.clientX, e.clientY, name);
        texts.push(newText);
        
        // 初始爆发特效
        for(let i=0; i<20; i++) particles.push(new Particle(e.clientX, e.clientY, newText.hue));
        
        shakeTime = 10; // 点击时的震动感
        bgOverlay = 0.2; // 柔和的背景闪烁
    });

    function animate() {
        // 画布震动逻辑
        ctx.save();
        if (shakeTime > 0) {
            const dx = (Math.random() - 0.5) * shakeTime * 2;
            const dy = (Math.random() - 0.5) * shakeTime * 2;
            ctx.translate(dx, dy);
            shakeTime--;
        }

        // 背景绘制
        ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // 柔和闪烁层
        if (bgOverlay > 0) {
            ctx.fillStyle = `rgba(255, 255, 255, ${bgOverlay})`;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            bgOverlay -= 0.02;
        }

        // 绘制粒子
        particles = particles.filter(p => p.life > 0);
        particles.forEach(p => {
            p.update();
            p.draw();
        });

        // 绘制文字
        texts.forEach(t => {
            t.update();
            t.draw();
        });

        ctx.restore();
        requestAnimationFrame(animate);
    }

    animate();
</script>
</body>
</html>
